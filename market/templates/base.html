<!doctype html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="DAFUQ Market - Your Premium E-Commerce Destination">
      
      <!-- Google Fonts - Inter -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
      
      <!-- Tailwind CSS CDN -->
      <script src="https://cdn.tailwindcss.com"></script>
      <script>
        tailwind.config = {
          theme: {
            extend: {
              fontFamily: {
                'inter': ['Inter', 'sans-serif'],
              },
              colors: {
                'primary': {
                  50: '#f5f3ff',
                  100: '#ede9fe',
                  200: '#ddd6fe',
                  300: '#c4b5fd',
                  400: '#a78bfa',
                  500: '#8b5cf6',
                  600: '#7c3aed',
                  700: '#6d28d9',
                  800: '#5b21b6',
                  900: '#4c1d95',
                },
                'dark': {
                  900: '#0a0a14',
                  800: '#0f0f1a',
                  700: '#1a1a2e',
                  600: '#16213e',
                },
              },
              animation: {
                'gradient': 'gradientShift 15s ease infinite',
                'float': 'float 6s ease-in-out infinite',
                'pulse-glow': 'pulse-glow 3s ease-in-out infinite',
                'shimmer': 'text-shimmer 4s linear infinite',
              },
            }
          }
        }
      </script>
      
      <!-- Font Awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
      
      <!-- Custom CSS -->
      <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
      
      <title>
          {% block title %}
          {% endblock %}
      </title>
      
      <style>
        * {
          font-family: 'Inter', sans-serif;
        }
        body {
          background: #0f0f1a;
          color: white;
        }
        /* Smooth scrolling */
        html {
          scroll-behavior: smooth;
        }
      </style>
   </head>
   <body class="font-inter">
    <!-- Glassmorphism Navbar -->
    <nav class="glass-nav fixed w-full z-50 px-4 py-3 md:px-8">
      <div class="max-w-7xl mx-auto flex items-center justify-between">
        <!-- Logo -->
        <a href="{{ url_for('home_page') }}" class="flex items-center space-x-2 group">
          <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300">
            <i class="fas fa-store text-white text-lg"></i>
          </div>
          <span class="text-xl font-bold bg-gradient-to-r from-white to-purple-300 bg-clip-text text-transparent">
            Flask Market
          </span>
        </a>
        
        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center space-x-8">
          <a href="{{ url_for('home_page') }}" class="nav-link-custom text-white hover:text-purple-400 transition-colors py-2">
            Home
          </a>
          <a href="{{ url_for('market_page') }}" class="nav-link-custom text-gray-300 hover:text-purple-400 transition-colors py-2">
            Market
          </a>
        </div>
        
        <!-- Auth Buttons -->
        <div class="hidden md:flex items-center space-x-4">
          {% if current_user.is_authenticated %}
            <div class="flex items-center space-x-3 px-4 py-2 rounded-xl bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30">
              <i class="fas fa-coins text-yellow-400"></i>
              <span class="text-green-400 font-semibold">{{ current_user.prettier_budget }}</span>
            </div>
            <span class="text-gray-300">Welcome, <span class="text-purple-400 font-medium">{{ current_user.username }}</span></span>
            <a href="{{ url_for('logout_page') }}" class="px-4 py-2 rounded-xl border border-red-500/50 text-red-400 hover:bg-red-500/10 transition-all duration-300">
              Logout
            </a>
          {% else %}
            <a href="{{ url_for('login_page') }}" class="px-5 py-2.5 rounded-xl text-gray-300 hover:text-white hover:bg-white/5 transition-all duration-300">
              Login
            </a>
            <a href="{{ url_for('register_page') }}" class="px-5 py-2.5 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium hover:shadow-lg hover:shadow-purple-500/25 transform hover:-translate-y-0.5 transition-all duration-300">
              Register
            </a>
          {% endif %}
        </div>
        
        <!-- Mobile Menu Button -->
        <button class="md:hidden text-white p-2 rounded-lg hover:bg-white/10 transition-colors" id="mobile-menu-btn">
          <i class="fas fa-bars text-xl"></i>
        </button>
      </div>
      
      <!-- Mobile Menu -->
      <div class="hidden md:hidden mt-4 pb-4 border-t border-white/10 pt-4" id="mobile-menu">
        <div class="flex flex-col space-y-3">
          <a href="{{ url_for('home_page') }}" class="text-white px-4 py-2 rounded-lg hover:bg-white/5 transition-colors">Home</a>
          <a href="{{ url_for('market_page') }}" class="text-gray-300 px-4 py-2 rounded-lg hover:bg-white/5 transition-colors">Market</a>
          {% if current_user.is_authenticated %}
            <div class="flex items-center space-x-2 px-4 py-2">
              <i class="fas fa-coins text-yellow-400"></i>
              <span class="text-green-400">{{ current_user.prettier_budget }}</span>
            </div>
            <a href="{{ url_for('logout_page') }}" class="text-red-400 px-4 py-2 rounded-lg hover:bg-red-500/10 transition-colors">Logout</a>
          {% else %}
            <a href="{{ url_for('login_page') }}" class="text-gray-300 px-4 py-2 rounded-lg hover:bg-white/5 transition-colors">Login</a>
            <a href="{{ url_for('register_page') }}" class="text-white px-4 py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-600">Register</a>
          {% endif %}
        </div>
      </div>
    </nav>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="fixed top-20 right-4 z-50 space-y-2">
          {% for category, message in messages %}
            <div class="px-6 py-4 rounded-xl backdrop-blur-lg border animate-fadeInUp
              {% if category == 'success' %}
                bg-green-500/20 border-green-500/30 text-green-400
              {% elif category == 'danger' %}
                bg-red-500/20 border-red-500/30 text-red-400
              {% elif category == 'info' %}
                bg-blue-500/20 border-blue-500/30 text-blue-400
              {% else %}
                bg-gray-500/20 border-gray-500/30 text-gray-400
              {% endif %}
            ">
              <div class="flex items-center justify-between">
                <span>{{ message }}</span>
                <button onclick="this.parentElement.parentElement.remove()" class="ml-4 hover:opacity-75">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Main Content -->
    {% block content %}
    {% endblock %}

    <!-- Mobile Menu Script -->
    <script>
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      
      if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', () => {
          mobileMenu.classList.toggle('hidden');
        });
      }
      
      // Auto-hide flash messages
      setTimeout(() => {
        document.querySelectorAll('.animate-fadeInUp').forEach(el => {
          el.style.opacity = '0';
          el.style.transition = 'opacity 0.5s';
          setTimeout(() => el.remove(), 500);
        });
      }, 5000);
    </script>
   </body>
</html>