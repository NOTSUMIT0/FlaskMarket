<!-- More Info Modal -->
<div class="modal fade" id="Modal-MoreInfo-{{ item.id }}" tabindex="-1" aria-labelledby="ModalLabel-{{ item.id }}"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content"
      style="background: rgba(26, 26, 46, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px;">
      <div class="modal-header" style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
        <h5 class="modal-title text-white font-semibold" id="ModalLabel-{{ item.id }}">
          <i class="fas fa-info-circle text-blue-400 mr-2"></i>{{ item.name }}
        </h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="text-center mb-4">
          <div class="w-20 h-20 mx-auto mb-4 rounded-xl flex items-center justify-center"
            style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));">
            <i class="fas fa-box-open text-3xl text-purple-400"></i>
          </div>
          <h3 class="text-2xl font-bold text-white mb-2">{{ item.name }}</h3>
          <span class="inline-block px-4 py-1 rounded-full text-lg font-semibold"
            style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.2)); color: #4ade80;">
            ${{ item.price }}
          </span>
        </div>

        <div class="mb-4 p-4 rounded-xl" style="background: rgba(255, 255, 255, 0.03);">
          <h6 class="text-gray-400 text-sm uppercase tracking-wider mb-2">Description</h6>
          <p class="text-gray-300 leading-relaxed">{{ item.description }}</p>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <div class="p-3 rounded-lg text-center" style="background: rgba(255, 255, 255, 0.02);">
            <p class="text-gray-500 text-xs mb-1">Barcode</p>
            <code class="text-purple-400 text-sm">{{ item.barcode }}</code>
          </div>
          <div class="p-3 rounded-lg text-center" style="background: rgba(255, 255, 255, 0.02);">
            <p class="text-gray-500 text-xs mb-1">Item ID</p>
            <span class="text-white font-medium">#{{ item.id }}</span>
          </div>
        </div>
      </div>
      <div class="modal-footer" style="border-top: 1px solid rgba(255, 255, 255, 0.1);">
        <button type="button" class="px-4 py-2 rounded-lg text-gray-300 transition-all hover:bg-white/5"
          data-dismiss="modal">Close</button>
        <button type="button" class="px-4 py-2 rounded-lg text-white font-medium transition-all"
          style="background: linear-gradient(135deg, #22c55e, #16a34a);" data-dismiss="modal" data-toggle="modal"
          data-target="#Modal-PurchaseConfirm-{{ item.id }}">
          <i class="fas fa-shopping-cart mr-2"></i>Buy Now
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Purchase Confirm Modal -->
<div class="modal fade" id="Modal-PurchaseConfirm-{{ item.id }}" tabindex="-1"
  aria-labelledby="PurchaseModalLabel-{{ item.id }}" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content"
      style="background: rgba(26, 26, 46, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px;">
      <div class="modal-header" style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
        <h5 class="modal-title text-white font-semibold" id="PurchaseModalLabel-{{ item.id }}">
          <i class="fas fa-shopping-cart text-green-400 mr-2"></i>Confirm Purchase
        </h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form method="POST">
          {{ purchase_form.hidden_tag() }}

          <div class="text-center mb-6">
            <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center"
              style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.2));">
              <i class="fas fa-check text-2xl text-green-400"></i>
            </div>
            <h4 class="text-xl text-white mb-2">
              Purchase <span class="text-purple-400 font-semibold">{{ item.name }}</span>?
            </h4>
            <p class="text-gray-400">
              This will deduct <span class="text-green-400 font-bold">${{ item.price }}</span> from your balance
            </p>
          </div>

          <div class="p-4 rounded-xl mb-4"
            style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05);">
            <div class="flex items-center justify-between">
              <span class="text-gray-400">Item Price</span>
              <span class="text-white font-semibold">${{ item.price }}</span>
            </div>
          </div>

          <input id="purchased_item" name="purchased_item" type="hidden" value="{{item.name}}">

          <button type="submit"
            class="w-full py-3 rounded-xl text-white font-semibold transition-all hover:-translate-y-0.5"
            style="background: linear-gradient(135deg, #22c55e, #16a34a);">
            <i class="fas fa-shopping-bag mr-2"></i>Confirm Purchase
          </button>
        </form>
      </div>
      <div class="modal-footer" style="border-top: 1px solid rgba(255, 255, 255, 0.1);">
        <button type="button" class="px-4 py-2 rounded-lg text-gray-300 transition-all hover:bg-white/5"
          data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>